(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[635],{12119:(e,s,t)=>{"use strict";t.d(s,{default:()=>E});var r=t(95155),a=t(12115),n=t(89715),i=t(17181),l=t(33),o=t(90960),c=t(31166),d=t(47972),m=t(26991),x=t(62319),u=t(19869),h=t(32909),g=t(88230),p=t(49685);let y=e=>{let{data:s,className:t=""}=e,a=s.map(e=>({dimension:e.dimension.replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()),score:Math.round(e.score)}));return(0,r.jsx)("div",{className:"w-full h-80 ".concat(t),children:(0,r.jsx)(m.u,{width:"100%",height:"100%",children:(0,r.jsxs)(x.V,{data:a,children:[(0,r.jsx)(u.z,{}),(0,r.jsx)(h.r,{dataKey:"dimension",tick:{fontSize:12,fill:"#374151"},className:"text-xs"}),(0,r.jsx)(g.E,{angle:90,domain:[0,100],tick:{fontSize:10,fill:"#6B7280"}}),(0,r.jsx)(p.V,{name:"Readiness Score",dataKey:"score",stroke:"#3B82F6",fill:"#3B82F6",fillOpacity:.1,strokeWidth:2})]})})})},j=e=>{let{value:s,max:t=100,className:a="",showLabel:n=!0,color:i="blue"}=e,l=Math.min(s/t*100,100),o=i;return"blue"===i&&(o=s>=80?"green":s>=60?"amber":"red"),(0,r.jsxs)("div",{className:"w-full ".concat(a),children:[(0,r.jsx)("div",{className:"flex justify-between items-center mb-1",children:n&&(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:[Math.round(s),"%"]})}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"h-2 rounded-full transition-all duration-500 ".concat({blue:"bg-blue-600",green:"bg-green-600",amber:"bg-amber-600",red:"bg-red-600"}[o]),style:{width:"".concat(l,"%")}})})]})};var b=t(98128),f=t(68425),v=t(47734),N=t(73697),w=t(23508),_=t(16533),R=t(69386);let S={economic:"Economic",socio_cultural:"Socio-Cultural",technical:"Technical",policy_regulatory:"Policy & Regulatory",environmental:"Environmental"},k={Economic:"#2E8B57","Socio-Cultural":"#FF8C00",Technical:"#1E90FF","Policy & Regulatory":"#8A2BE2",Environmental:"#228B22"},A={very_ready:{label:"Very Ready",color:"text-green-600",description:"Excellent readiness for satellite internet adoption"},not_sure:{label:"Not Sure",color:"text-amber-600",description:"Moderate readiness with areas for improvement"},not_ready:{label:"Not Ready",color:"text-red-600",description:"Significant improvements needed before adoption"}},E=e=>{let{submissionId:s,isPublic:t=!1}=e,[x,u]=(0,a.useState)(null),[h,g]=(0,a.useState)(!0),[p,E]=(0,a.useState)("");(0,a.useEffect)(()=>{C()},[s]);let C=async()=>{try{g(!0);let e=await o.rP.getSubmission(s,t);u(e.data)}catch(e){console.error("Error loading submission:",e),E("Failed to load results. Please check your link and try again.")}finally{g(!1)}},P=async()=>{try{let e=await o.rP.exportPDF(s),t=new Blob([e.data],{type:"application/pdf"}),r=window.URL.createObjectURL(t),a=document.createElement("a");a.href=r,a.download="rafsia_report_".concat(s,".pdf"),document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(r),document.body.removeChild(a)}catch(e){console.error("Error downloading PDF:",e),alert("Error downloading report. Please try again.")}},F=e=>[{dimension:"Economic",score:Math.round(e.economic_score)},{dimension:"Socio-Cultural",score:Math.round(e.socio_cultural_score)},{dimension:"Technical",score:Math.round(e.technical_score)},{dimension:"Policy & Regulatory",score:Math.round(e.policy_regulatory_score)},{dimension:"Environmental",score:Math.round(e.environmental_score)}];if(h)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading your results..."})]})});if(p||!x)return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Results Not Found"}),(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:p||"The requested results could not be found."}),(0,r.jsx)(c.A,{onClick:()=>window.location.href="/",children:"Take New Assessment"})]})});let I=A[x.readiness_level]||A.not_ready;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Your RAFSIA Assessment Results"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Satellite Internet Adoption Readiness Report"})]}),(0,r.jsx)(d.Zp,{className:"mb-8",children:(0,r.jsxs)(d.Wu,{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-full bg-blue-100 mb-4",children:(0,r.jsx)("span",{className:"text-3xl font-bold text-blue-600",children:Math.round(x.overall_score)})}),(0,r.jsx)("h2",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Overall Readiness Score"}),(0,r.jsxs)("p",{className:"text-lg font-medium mb-2 ".concat(I.color),children:[I.label," (",Math.round(x.overall_score),"/100)"]}),(0,r.jsx)("p",{className:"text-gray-600 max-w-md mx-auto",children:I.description}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center gap-4 mt-6",children:[(0,r.jsxs)(c.A,{onClick:P,className:"flex items-center space-x-2",children:[(0,r.jsx)(n.A,{size:16}),(0,r.jsx)("span",{children:"Download PDF Report"})]}),(0,r.jsxs)(c.A,{variant:"outline",onClick:()=>{navigator.share?navigator.share({title:"RAFSIA Readiness Assessment Results",text:"My readiness score: ".concat(null==x?void 0:x.overall_score.toFixed(1),"%"),url:window.location.href}):(navigator.clipboard.writeText(window.location.href),alert("Link copied to clipboard!"))},className:"flex items-center space-x-2",children:[(0,r.jsx)(i.A,{size:16}),(0,r.jsx)("span",{children:"Share Results"})]})]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(l.A,{size:20,className:"mr-2"}),"Readiness by Dimension (Radar)"]})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(y,{data:(e=>[{dimension:"Technical",score:e.technical_score},{dimension:"Economic",score:e.economic_score},{dimension:"Socio-Cultural",score:e.socio_cultural_score},{dimension:"Environmental",score:e.environmental_score},{dimension:"Policy & Regulatory",score:e.policy_regulatory_score}])(x)})})]}),(0,r.jsxs)(d.Zp,{children:[(0,r.jsx)(d.aR,{children:(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,r.jsx)(l.A,{size:20,className:"mr-2"}),"Dimension Scores (Bar Chart)"]})}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)(m.u,{width:"100%",height:250,children:(0,r.jsxs)(b.E,{data:F(x),barSize:35,margin:{bottom:20},children:[(0,r.jsx)(f.d,{strokeDasharray:"3 3"}),(0,r.jsx)(v.W,{dataKey:"dimension",tick:{fontSize:12},interval:0}),(0,r.jsx)(N.h,{domain:[0,100]}),(0,r.jsx)(w.m,{}),(0,r.jsx)(_.y,{dataKey:"score",radius:[6,6,0,0],children:F(x).map((e,s)=>(0,r.jsx)(R.f,{fill:k[e.dimension]},"cell-".concat(s)))})]})})})]})]}),(0,r.jsxs)(d.Zp,{className:"mt-8",children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Detailed Scores"})}),(0,r.jsx)(d.Wu,{className:"space-y-6",children:Object.entries(x.scores_by_dimension).map(e=>{let[s,t]=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsx)("span",{className:"text-sm font-medium text-gray-700",children:S[s]}),(0,r.jsxs)("span",{className:"text-sm font-semibold text-gray-900",children:[Math.round(t),"%"]})]}),(0,r.jsx)(j,{value:t,showLabel:!1})]},s)})})]}),x.recommendations&&x.recommendations.length>0&&(0,r.jsxs)(d.Zp,{className:"mt-8",children:[(0,r.jsxs)(d.aR,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recommendations for Improvement"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Based on your assessment, here are some areas where you can improve readiness:"})]}),(0,r.jsx)(d.Wu,{children:(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:x.recommendations.map((e,s)=>(0,r.jsx)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-start",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("div",{className:"inline-flex items-center justify-center h-6 w-6 rounded-full bg-blue-600 text-white text-xs font-medium",children:s+1})}),(0,r.jsx)("p",{className:"ml-3 text-sm text-gray-700",children:e})]})},s))})})]}),!x.is_anonymous&&(0,r.jsxs)(d.Zp,{className:"mt-8",children:[(0,r.jsx)(d.aR,{children:(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Assessment Details"})}),(0,r.jsx)(d.Wu,{children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 text-sm",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Respondent:"}),(0,r.jsx)("p",{className:"font-medium",children:x.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Role:"}),(0,r.jsx)("p",{className:"font-medium",children:x.role})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Institution:"}),(0,r.jsx)("p",{className:"font-medium",children:x.institution_name_display||x.institution_name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"County:"}),(0,r.jsx)("p",{className:"font-medium",children:x.county})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Submitted:"}),(0,r.jsx)("p",{className:"font-medium",children:new Date(x.submitted_at).toLocaleDateString()})]})]})})]})]})})}},12491:(e,s,t)=>{Promise.resolve().then(t.bind(t,12119))},31166:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var r=t(95155);t(12115);let a=e=>{let{variant:s="primary",size:t="md",className:a="",children:n,...i}=e;return(0,r.jsx)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t]," ").concat(a),...i,children:n})}},47972:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>i,Zp:()=>a,aR:()=>n});var r=t(95155);t(12115);let a=e=>{let{children:s,className:t=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm ".concat(t),children:s})},n=e=>{let{children:s,className:t=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(t),children:s})},i=e=>{let{children:s,className:t=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 ".concat(t),children:s})}},90960:(e,s,t)=>{"use strict";t.d(s,{IR:()=>o,R2:()=>i,rP:()=>l});var r=t(95125);let a=t(95704).env.NEXT_PUBLIC_API_BASE_URL||"https://rafsia.org/api",n=r.A.create({baseURL:a,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let s=localStorage.getItem("access_token");s&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(s))}return e}),n.interceptors.response.use(e=>e,async e=>{var s;let t=null==e||null==(s=e.response)?void 0:s.status,i=e.config;if(401===t&&!(null==i?void 0:i._retry)){let e=localStorage.getItem("refresh_token");if(e)try{i._retry=!0;let{data:s}=await r.A.post("".concat(a,"/auth/token/refresh/"),{refresh:e}),{access:t}=s||{};if(t)return localStorage.setItem("access_token",t),i.headers=i.headers||{},i.headers.Authorization="Bearer ".concat(t),n.request(i)}catch(e){}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/admin/login"}return Promise.reject(e)});let i={login:(e,s)=>n.post("/auth/token/",{username:e,password:s}),register:(e,s,t)=>n.post("/auth/register/",{username:e,email:s,password:t}),refresh:e=>n.post("/auth/token/refresh/",{refresh:e})},l={getQuestions:(e,s)=>n.get("/surveys/questions/",{params:{role:e,dimension:s}}),submitSurvey:e=>n.post("/surveys/submissions/",e),getSubmission:(e,s)=>n.get("/surveys/submissions/".concat(e,"/"),{params:s?{public:"true"}:{}}),getSubmissions:(e,s,t)=>n.get("/surveys/submissions/",{params:e}),getStatistics:()=>n.get("/surveys/submissions/statistics/"),exportCSV:e=>n.get("/surveys/submissions/export_csv/",{params:e}),exportPDF:e=>n.get("/surveys/submissions/".concat(e,"/export_pdf/")),getInstitutions:()=>n.get("/surveys/institutions/"),getProjects:()=>n.get("/surveys/projects/")},o={getNotes:e=>n.get("/interviews/notes/",{params:e}),createNote:e=>n.post("/interviews/notes/",e),updateNote:(e,s)=>n.put("/interviews/notes/".concat(e,"/"),s),deleteNote:e=>n.delete("/interviews/notes/".concat(e,"/")),getAnalytics:()=>n.get("/interviews/notes/analytics/")}}},e=>{e.O(0,[125,692,441,255,358],()=>e(e.s=12491)),_N_E=e.O()}]);