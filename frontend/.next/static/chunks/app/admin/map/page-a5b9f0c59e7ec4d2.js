(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[779],{1150:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return i}});let r=s(95155),n=s(12115),a=s(24437);function l(e){return{default:e&&"default"in e?e.default:e}}s(36552);let o={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},i=function(e){let t={...o,...e},s=(0,n.lazy)(()=>t.loader().then(l)),i=t.loading;function c(e){let l=i?(0,r.jsx)(i,{isLoading:!0,pastDelay:!0,error:null}):null,o=!t.ssr||!!t.loading,c=o?n.Suspense:n.Fragment,u=t.ssr?(0,r.jsxs)(r.Fragment,{children:[null,(0,r.jsx)(s,{...e})]}):(0,r.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,r.jsx)(s,{...e})});return(0,r.jsx)(c,{...o?{fallback:l}:{},children:u})}return c.displayName="LoadableComponent",c}},8567:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorage",{enumerable:!0,get:function(){return r.workAsyncStorageInstance}});let r=s(17828)},17828:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"workAsyncStorageInstance",{enumerable:!0,get:function(){return r}});let r=(0,s(64054).createAsyncLocalStorage)()},24437:(e,t,s)=>{"use strict";function r(e){let{reason:t,children:s}=e;return s}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return r}}),s(24553)},36552:(e,t,s)=>{"use strict";function r(e){let{moduleIds:t}=e;return null}Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"PreloadChunks",{enumerable:!0,get:function(){return r}}),s(95155),s(47650),s(8567),s(77278)},47972:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>l,Zp:()=>n,aR:()=>a});var r=s(95155);s(12115);let n=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm ".concat(s),children:t})},a=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(s),children:t})},l=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 ".concat(s),children:t})}},53466:(e,t,s)=>{"use strict";s.d(t,{default:()=>m});var r=s(95155),n=s(12115),a=s(86278),l=s.n(a),o=s(90960),i=s(47972);let c=l()(()=>Promise.all([s.e(761),s.e(538)]).then(s.bind(s,33538)).then(e=>e.MapContainer),{loadableGenerated:{webpack:()=>[33538]},ssr:!1}),u=l()(()=>Promise.all([s.e(761),s.e(538)]).then(s.bind(s,33538)).then(e=>e.TileLayer),{loadableGenerated:{webpack:()=>[33538]},ssr:!1}),d=l()(()=>Promise.all([s.e(761),s.e(538)]).then(s.bind(s,33538)).then(e=>e.Marker),{loadableGenerated:{webpack:()=>[33538]},ssr:!1}),h=l()(()=>Promise.all([s.e(761),s.e(538)]).then(s.bind(s,33538)).then(e=>e.Popup),{loadableGenerated:{webpack:()=>[33538]},ssr:!1}),m=e=>{let{className:t=""}=e,[s,a]=(0,n.useState)([]),[l,m]=(0,n.useState)([]),[p,f]=(0,n.useState)(!0);(0,n.useEffect)(()=>{b()},[]);let b=async()=>{try{let[e,t]=await Promise.all([o.rP.getInstitutions(),o.rP.getSubmissions()]);a(e.data.filter(e=>e.latitude&&e.longitude)),m(t.data)}catch(e){console.error("Error loading map data:",e)}finally{f(!1)}};return p?(0,r.jsx)(i.Zp,{className:t,children:(0,r.jsx)(i.Wu,{className:"flex items-center justify-center h-96",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading map..."})]})})}):(0,r.jsxs)(i.Zp,{className:t,children:[(0,r.jsxs)(i.aR,{children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Readiness by Location"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Geographic distribution of readiness scores across institutions"})]}),(0,r.jsxs)(i.Wu,{children:[(0,r.jsx)("div",{className:"h-96 rounded-lg overflow-hidden",children:(0,r.jsxs)(c,{center:[.5,34.5],zoom:7,style:{height:"100%",width:"100%"},children:[(0,r.jsx)(u,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),s.map(e=>{let t=(e=>{let t=l.filter(t=>t.institution===e);if(0===t.length)return null;let s=t.reduce((e,t)=>e+t.overall_score,0)/t.length;return{score:s,count:t.length,level:s>=80?"very_ready":s>=60?"not_sure":"not_ready"}})(e.id);return(0,r.jsx)(d,{position:[e.latitude,e.longitude],children:(0,r.jsx)(h,{children:(0,r.jsxs)("div",{className:"p-2",children:[(0,r.jsx)("h4",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[e.county," County"]}),t?(0,r.jsxs)("div",{children:[(0,r.jsxs)("p",{className:"text-sm",children:[(0,r.jsx)("span",{className:"font-medium",children:"Readiness Score:"})," ",(0,r.jsxs)("span",{className:"font-semibold",style:{color:(e=>{if(!e)return"#6B7280";switch(e.level){case"very_ready":return"#10B981";case"not_sure":return"#F59E0B";case"not_ready":return"#EF4444";default:return"#6B7280"}})(t)},children:[Math.round(t.score),"%"]})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-500",children:["Based on ",t.count," submission",1!==t.count?"s":""]})]}):(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"No data available"})]})})},e.id)})]})}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-6 mt-4 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-green-500"}),(0,r.jsx)("span",{children:"Very Ready (80-100)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),(0,r.jsx)("span",{children:"Not Sure (60-79)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-red-500"}),(0,r.jsx)("span",{children:"Not Ready (<60)"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-gray-500"}),(0,r.jsx)("span",{children:"No Data"})]})]})]})]})}},64054:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),!function(e,t){for(var s in t)Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}(t,{bindSnapshot:function(){return l},createAsyncLocalStorage:function(){return a},createSnapshot:function(){return o}});let s=Object.defineProperty(Error("Invariant: AsyncLocalStorage accessed in runtime where it is not available"),"__NEXT_ERROR_CODE",{value:"E504",enumerable:!1,configurable:!0});class r{disable(){throw s}getStore(){}run(){throw s}exit(){throw s}enterWith(){throw s}static bind(e){return e}}let n="undefined"!=typeof globalThis&&globalThis.AsyncLocalStorage;function a(){return n?new n:new r}function l(e){return n?n.bind(e):r.bind(e)}function o(){return n?n.snapshot():function(e,...t){return e(...t)}}},77829:(e,t,s)=>{Promise.resolve().then(s.bind(s,53466))},86278:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let r=s(28140)._(s(1150));function n(e,t){var s;let n={};"function"==typeof e&&(n.loader=e);let a={...n,...t};return(0,r.default)({...a,modules:null==(s=a.loadableGenerated)?void 0:s.modules})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},90960:(e,t,s)=>{"use strict";s.d(t,{IR:()=>i,R2:()=>l,rP:()=>o});var r=s(95125);let n=s(95704).env.NEXT_PUBLIC_API_BASE_URL||"https://rafsia.org/api",a=r.A.create({baseURL:n,headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let t=localStorage.getItem("access_token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e}),a.interceptors.response.use(e=>e,async e=>{var t;let s=null==e||null==(t=e.response)?void 0:t.status,l=e.config;if(401===s&&!(null==l?void 0:l._retry)){let e=localStorage.getItem("refresh_token");if(e)try{l._retry=!0;let{data:t}=await r.A.post("".concat(n,"/auth/token/refresh/"),{refresh:e}),{access:s}=t||{};if(s)return localStorage.setItem("access_token",s),l.headers=l.headers||{},l.headers.Authorization="Bearer ".concat(s),a.request(l)}catch(e){}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/admin/login"}return Promise.reject(e)});let l={login:(e,t)=>a.post("/auth/token/",{username:e,password:t}),register:(e,t,s)=>a.post("/auth/register/",{username:e,email:t,password:s}),refresh:e=>a.post("/auth/token/refresh/",{refresh:e})},o={getQuestions:(e,t)=>a.get("/surveys/questions/",{params:{role:e,dimension:t}}),submitSurvey:e=>a.post("/surveys/submissions/",e),getSubmission:(e,t)=>a.get("/surveys/submissions/".concat(e,"/"),{params:t?{public:"true"}:{}}),getSubmissions:(e,t,s)=>a.get("/surveys/submissions/",{params:e}),getStatistics:()=>a.get("/surveys/submissions/statistics/"),exportCSV:e=>a.get("/surveys/submissions/export_csv/",{params:e}),exportPDF:e=>a.get("/surveys/submissions/".concat(e,"/export_pdf/")),getInstitutions:()=>a.get("/surveys/institutions/"),getProjects:()=>a.get("/surveys/projects/")},i={getNotes:e=>a.get("/interviews/notes/",{params:e}),createNote:e=>a.post("/interviews/notes/",e),updateNote:(e,t)=>a.put("/interviews/notes/".concat(e,"/"),t),deleteNote:e=>a.delete("/interviews/notes/".concat(e,"/")),getAnalytics:()=>a.get("/interviews/notes/analytics/")}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=77829)),_N_E=e.O()}]);