(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{33:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},5590:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(95155);t(12115);let r=e=>{let{label:s,error:t,className:r="",...l}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[s&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s}),(0,a.jsx)("input",{className:"\n          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm \n          placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\n          ".concat(t?"border-red-500":"","\n          ").concat(r,"\n        "),...l}),t&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:t})]})}},6191:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},20063:(e,s,t)=>{"use strict";var a=t(47260);t.o(a,"useRouter")&&t.d(s,{useRouter:function(){return a.useRouter}}),t.o(a,"useSearchParams")&&t.d(s,{useSearchParams:function(){return a.useSearchParams}})},24326:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},31166:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(95155);t(12115);let r=e=>{let{variant:s="primary",size:t="md",className:r="",children:l,...n}=e;return(0,a.jsx)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"}[s]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[t]," ").concat(r),...n,children:l})}},32092:(e,s,t)=>{Promise.resolve().then(t.bind(t,95029))},43698:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(95155);t(12115);let r=e=>{let{label:s,error:t,options:r,className:l="",...n}=e;return(0,a.jsxs)("div",{className:"space-y-1",children:[s&&(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:s}),(0,a.jsx)("select",{className:"\n          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm \n          focus:outline-none focus:ring-blue-500 focus:border-blue-500\n          ".concat(t?"border-red-500":"","\n          ").concat(l,"\n        "),...n,children:r.map(e=>(0,a.jsx)("option",{value:e.value,children:e.label},e.value))}),t&&(0,a.jsx)("p",{className:"text-sm text-red-600",children:t})]})}},45105:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(12115),r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let l=(e,s)=>{let t=(0,a.forwardRef)((t,l)=>{let{color:n="currentColor",size:i=24,strokeWidth:c=2,absoluteStrokeWidth:d,className:o="",children:x,...u}=t;return(0,a.createElement)("svg",{ref:l,...r,width:i,height:i,stroke:n,strokeWidth:d?24*Number(c)/Number(i):c,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),o].join(" "),...u},[...s.map(e=>{let[s,t]=e;return(0,a.createElement)(s,t)}),...Array.isArray(x)?x:[x]])});return t.displayName="".concat(e),t}},47972:(e,s,t)=>{"use strict";t.d(s,{Wu:()=>n,Zp:()=>r,aR:()=>l});var a=t(95155);t(12115);let r=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm ".concat(t),children:s})},l=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(t),children:s})},n=e=>{let{children:s,className:t=""}=e;return(0,a.jsx)("div",{className:"px-6 py-4 ".concat(t),children:s})}},65229:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},87066:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]])},89715:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},90960:(e,s,t)=>{"use strict";t.d(s,{IR:()=>c,R2:()=>n,rP:()=>i});var a=t(95125);let r=t(95704).env.NEXT_PUBLIC_API_BASE_URL||"https://rafsia.org/api",l=a.A.create({baseURL:r,headers:{"Content-Type":"application/json"}});l.interceptors.request.use(e=>{{let s=localStorage.getItem("access_token");s&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(s))}return e}),l.interceptors.response.use(e=>e,async e=>{var s;let t=null==e||null==(s=e.response)?void 0:s.status,n=e.config;if(401===t&&!(null==n?void 0:n._retry)){let e=localStorage.getItem("refresh_token");if(e)try{n._retry=!0;let{data:s}=await a.A.post("".concat(r,"/auth/token/refresh/"),{refresh:e}),{access:t}=s||{};if(t)return localStorage.setItem("access_token",t),n.headers=n.headers||{},n.headers.Authorization="Bearer ".concat(t),l.request(n)}catch(e){}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/admin/login"}return Promise.reject(e)});let n={login:(e,s)=>l.post("/auth/token/",{username:e,password:s}),register:(e,s,t)=>l.post("/auth/register/",{username:e,email:s,password:t}),refresh:e=>l.post("/auth/token/refresh/",{refresh:e})},i={getQuestions:(e,s)=>l.get("/surveys/questions/",{params:{role:e,dimension:s}}),submitSurvey:e=>l.post("/surveys/submissions/",e),getSubmission:(e,s)=>l.get("/surveys/submissions/".concat(e,"/"),{params:s?{public:"true"}:{}}),getSubmissions:(e,s,t)=>l.get("/surveys/submissions/",{params:e}),getStatistics:()=>l.get("/surveys/submissions/statistics/"),exportCSV:e=>l.get("/surveys/submissions/export_csv/",{params:e}),exportPDF:e=>l.get("/surveys/submissions/".concat(e,"/export_pdf/")),getInstitutions:()=>l.get("/surveys/institutions/"),getProjects:()=>l.get("/surveys/projects/")},c={getNotes:e=>l.get("/interviews/notes/",{params:e}),createNote:e=>l.post("/interviews/notes/",e),updateNote:(e,s)=>l.put("/interviews/notes/".concat(e,"/"),s),deleteNote:e=>l.delete("/interviews/notes/".concat(e,"/")),getAnalytics:()=>l.get("/interviews/notes/analytics/")}},91169:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(45105).A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},94465:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(95155);t(12115);var r=t(65229);let l=e=>{let{isOpen:s,onClose:t,title:l,children:n,size:i="md"}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,a.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),(0,a.jsxs)("div",{className:"inline-block w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[i]," my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:l}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)(r.A,{size:24})})]}),(0,a.jsx)("div",{className:"px-6 py-4",children:n})]})]})}):null}},95029:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var a=t(95155),r=t(12115),l=t(20063),n=t(33),i=t(87066),c=t(89715),d=t(45105);let o=(0,d.A)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),x=(0,d.A)("Layers3",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m6.08 9.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59",key:"1e5n1m"}],["path",{d:"m6.08 14.5-3.5 1.6a1 1 0 0 0 0 1.81l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9a1 1 0 0 0 0-1.83l-3.5-1.59",key:"1iwflc"}]]);var u=t(91169);let m={submissions:(0,a.jsx)(n.A,{className:"h-5 w-5"}),surveys:(0,a.jsx)(i.A,{className:"h-5 w-5"}),questions:(0,a.jsx)(c.A,{className:"h-5 w-5"}),answers:(0,a.jsx)(o,{className:"h-5 w-5"}),projects:(0,a.jsx)(x,{className:"h-5 w-5"}),users:(0,a.jsx)(u.A,{className:"h-5 w-5"})},h={submissions:"Submissions",surveys:"Surveys",questions:"Questions",answers:"Answers",projects:"Projects",users:"Users"};function p(e){let{tabs:s,activeTab:t,onTabChange:r,children:l}=e;return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50 flex",children:[(0,a.jsxs)("div",{className:"w-64 bg-white shadow-sm border-r border-gray-200",children:[(0,a.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,a.jsx)("h1",{className:"text-xl font-bold text-gray-900",children:"RAFSIA Admin"}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Dashboard"})]}),(0,a.jsx)("nav",{className:"mt-6",children:(0,a.jsx)("ul",{className:"space-y-1 px-3",children:s.map(e=>{let s=e===t;return(0,a.jsx)("li",{children:(0,a.jsxs)("button",{onClick:()=>r(e),className:"w-full flex items-center gap-3 px-3 py-2.5 text-sm font-medium rounded-lg transition-colors duration-200 ".concat(s?"bg-blue-50 text-blue-700 border border-blue-200":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),children:[m[e],(0,a.jsx)("span",{children:h[e]})]})},e)})})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-w-0",children:[(0,a.jsx)("header",{className:"bg-white shadow-sm border-b border-gray-200",children:(0,a.jsx)("div",{className:"px-6 py-4",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[m[t],(0,a.jsxs)("div",{children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:h[t]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor and manage readiness assessment data"})]})]})})}),(0,a.jsx)("main",{className:"flex-1 p-6",children:l})]})]})}let g=(0,d.A)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),y=(0,d.A)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),j=(0,d.A)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var b=t(90960),v=t(31166),f=t(5590),N=t(43698),w=t(47972),k=t(94465);function _(){let[e,s]=(0,r.useState)(null),[t,l]=(0,r.useState)([]),[i,d]=(0,r.useState)(!0),[o,x]=(0,r.useState)(!1),[m,h]=(0,r.useState)({role:"",county:"",institution:"",date_from:"",date_to:""});(0,r.useEffect)(()=>{p()},[m]);let p=async()=>{try{d(!0);let[e,t]=await Promise.all([b.rP.getStatistics(),b.rP.getSubmissions(m)]);s(e.data),l(t.data)}catch(e){console.error("Error loading dashboard data:",e)}finally{d(!1)}},_=async()=>{try{let e=await b.rP.exportCSV(m),s=new Blob([e.data],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download="rafsia_submissions.csv",document.body.appendChild(a),a.click(),window.URL.revokeObjectURL(t),document.body.removeChild(a)}catch(e){console.error("Error exporting CSV:",e),alert("Error exporting data. Please try again.")}},A=(e,s)=>{h(t=>({...t,[e]:s}))};return i&&!e?(0,a.jsxs)("div",{className:"bg-gray-50 rounded-xl p-12 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading submissions…"})]}):(0,a.jsxs)("div",{children:[e&&(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,a.jsx)(w.Zp,{children:(0,a.jsxs)(w.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)(u.A,{className:"h-8 w-8 text-blue-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Submissions"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.total_submissions})]})]})}),(0,a.jsx)(w.Zp,{children:(0,a.jsxs)(w.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)(g,{className:"h-8 w-8 text-green-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Average Readiness"}),(0,a.jsxs)("p",{className:"text-2xl font-semibold text-gray-900",children:[Math.round(e.average_scores.overall),"%"]})]})]})}),(0,a.jsx)(w.Zp,{children:(0,a.jsxs)(w.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)(n.A,{className:"h-8 w-8 text-purple-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Very Ready"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:e.by_readiness_level.very_ready||0})]})]})}),(0,a.jsx)(w.Zp,{children:(0,a.jsxs)(w.Wu,{className:"flex items-center p-6",children:[(0,a.jsx)(c.A,{className:"h-8 w-8 text-amber-600"}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Counties"}),(0,a.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:Object.keys(e.by_county).length})]})]})})]}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsxs)(v.A,{variant:"outline",onClick:()=>x(!o),className:"flex items-center space-x-2",children:[(0,a.jsx)(y,{size:16}),(0,a.jsx)("span",{children:"Filters"})]}),Object.values(m).some(Boolean)&&(0,a.jsx)(v.A,{variant:"outline",onClick:()=>{h({role:"",county:"",institution:"",date_from:"",date_to:""})},children:"Clear Filters"})]}),(0,a.jsx)("div",{className:"flex items-center space-x-4",children:(0,a.jsxs)(v.A,{onClick:_,className:"flex items-center space-x-2",children:[(0,a.jsx)(j,{size:16}),(0,a.jsx)("span",{children:"Export CSV"})]})})]}),(0,a.jsxs)(k.A,{isOpen:o,onClose:()=>x(!1),title:"Filter Submissions",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsx)(N.A,{label:"Role",value:m.role,onChange:e=>A("role",e.target.value),options:[{value:"",label:"All roles"},{value:"lecturer",label:"Lecturer"},{value:"it_support",label:"IT Support"},{value:"admin",label:"Administrator"},{value:"principal",label:"Principal"},{value:"student",label:"Student"},{value:"service_provider",label:"Service Provider"}]}),(0,a.jsx)(f.A,{label:"County",type:"text",value:m.county,onChange:e=>A("county",e.target.value),placeholder:"Filter by county..."}),(0,a.jsx)(f.A,{label:"Institution",type:"text",value:m.institution,onChange:e=>A("institution",e.target.value),placeholder:"Filter by institution..."}),(0,a.jsx)(f.A,{label:"Date From",type:"date",value:m.date_from,onChange:e=>A("date_from",e.target.value)}),(0,a.jsx)(f.A,{label:"Date To",type:"date",value:m.date_to,onChange:e=>A("date_to",e.target.value)})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-4 mt-6",children:[(0,a.jsx)(v.A,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),(0,a.jsx)(v.A,{onClick:()=>x(!1),children:"Apply Filters"})]})]}),(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Submissions"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:i?"Loading...":"".concat(t.length," submissions found")})]}),(0,a.jsxs)(w.Wu,{children:[(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Respondent"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institution"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"County"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Overall Score"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Readiness Level"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Submitted"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.name||"Anonymous"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.role}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.institution_name_display}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.county}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:[Math.round(e.overall_score),"%"]}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"px-2 py-1 text-xs font-medium rounded-full ".concat("very_ready"===e.readiness_level?"bg-green-100 text-green-800":"not_sure"===e.readiness_level?"bg-amber-100 text-amber-800":"bg-red-100 text-red-800"),children:"very_ready"===e.readiness_level?"Very Ready":"not_sure"===e.readiness_level?"Not Sure":"Not Ready"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.submitted_at).toLocaleDateString()}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,a.jsx)(v.A,{variant:"outline",size:"sm",onClick:()=>window.open("/results/".concat(e.id),"_blank"),children:"View Results"})})]},e.id))})]})}),0===t.length&&!i&&(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("p",{className:"text-gray-500",children:"No submissions found matching your criteria."})})]})]})]})}function A(){return(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Surveys"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage survey definitions (coming soon)"})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsx)("div",{className:"text-gray-600",children:"Build your surveys here."})})]})}var S=t(6191);let C=(0,d.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var R=t(24326),P=t(71360);function D(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(""),[o,x]=(0,r.useState)(""),[u,m]=(0,r.useState)(""),h=async()=>{try{l(!0),i(null);let e=await b.rP.getQuestions(o||void 0,u||void 0);s(e.data||[])}catch(s){var e,t;i((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||s.message||"Failed to fetch questions"),console.error("Error fetching questions:",s)}finally{l(!1)}};(0,r.useEffect)(()=>{h()},[o,u]);let p=e.filter(e=>{var s,t;return e.text.toLowerCase().includes(c.toLowerCase())||(null==(s=e.role)?void 0:s.toLowerCase().includes(c.toLowerCase()))||(null==(t=e.dimension)?void 0:t.toLowerCase().includes(c.toLowerCase()))}),g=[...new Set(e.map(e=>e.role).filter(Boolean))],y=[...new Set(e.map(e=>e.dimension).filter(Boolean))];return t?(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Loading questions..."})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):n?(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Error loading questions"})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:[(0,a.jsx)("p",{className:"text-red-800",children:n}),(0,a.jsx)("button",{onClick:h,className:"mt-2 px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Try Again"})]})})]}):(0,a.jsx)("div",{className:"space-y-6",children:(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Questions"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["Manage survey questions (",e.length," total)"]})]}),(0,a.jsxs)("button",{className:"inline-flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:[(0,a.jsx)(S.A,{className:"h-4 w-4"}),"Add Question"]})]})}),(0,a.jsxs)(w.Wu,{children:[(0,a.jsx)("div",{className:"mb-6 space-y-4",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,a.jsxs)("div",{className:"relative flex-1",children:[(0,a.jsx)(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),(0,a.jsx)("input",{type:"text",placeholder:"Search questions...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),(0,a.jsx)("div",{className:"min-w-[150px]",children:(0,a.jsxs)("select",{value:o,onChange:e=>x(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Roles"}),g.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})}),(0,a.jsx)("div",{className:"min-w-[150px]",children:(0,a.jsxs)("select",{value:u,onChange:e=>m(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Dimensions"}),y.map(e=>(0,a.jsx)("option",{value:e,children:e},e))]})})]})}),0===p.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:c||o||u?"No questions match your current filters.":"No questions found."}):(0,a.jsx)("div",{className:"space-y-4",children:p.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-sm transition-shadow",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-600",children:["ID: ",e.id]}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"),children:e.is_active?"Active":"Inactive"}),e.role&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-purple-100 text-purple-800 rounded-full",children:e.role}),e.dimension&&(0,a.jsx)("span",{className:"px-2 py-1 text-xs bg-orange-100 text-orange-800 rounded-full",children:e.dimension})]}),(0,a.jsx)("p",{className:"text-gray-900 mb-2",children:e.text}),(0,a.jsxs)("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[(0,a.jsxs)("span",{children:["Type: ",e.question_type]}),e.order&&(0,a.jsxs)("span",{children:["Order: ",e.order]}),(0,a.jsxs)("span",{children:["Created: ",new Date(e.created_at).toLocaleDateString()]})]})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 ml-4",children:[(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded-md transition-colors",children:(0,a.jsx)(R.A,{className:"h-4 w-4"})}),(0,a.jsx)("button",{className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-md transition-colors",children:(0,a.jsx)(P.A,{className:"h-4 w-4"})})]})]})},e.id))})]})]})})}function L(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)([]),[n,i]=(0,r.useState)(!0),[c,d]=(0,r.useState)(null),[o,x]=(0,r.useState)({role:"",dimension:"",status:""}),u=async()=>{try{i(!0),d(null);let e=(await b.rP.getSubmissions(o)).data;l(e);let t=[];e.forEach(e=>{e.answers&&Array.isArray(e.answers)&&e.answers.forEach(s=>{t.push({...s,submission_id:e.id})})}),s(t)}catch(s){var e,t;console.error("Error fetching answers:",s),d((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch answers")}finally{i(!1)}};(0,r.useEffect)(()=>{u()},[o]);let m=(e,s)=>{x(t=>({...t,[e]:s}))},h=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return n?(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Answers"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Loading answers..."})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):c?(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Answers"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:"Error loading answers"})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsxs)("div",{className:"text-red-600 py-4",children:[c,(0,a.jsx)("button",{onClick:u,className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})})]}):(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Answers"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:[e.length," answers from ",t.length," submissions"]})]}),(0,a.jsxs)(w.Wu,{children:[(0,a.jsxs)("div",{className:"mb-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Role"}),(0,a.jsxs)("select",{value:o.role,onChange:e=>m("role",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Roles"}),(0,a.jsx)("option",{value:"student",children:"Student"}),(0,a.jsx)("option",{value:"teacher",children:"Teacher"}),(0,a.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Dimension"}),(0,a.jsxs)("select",{value:o.dimension,onChange:e=>m("dimension",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Dimensions"}),(0,a.jsx)("option",{value:"technical",children:"Technical"}),(0,a.jsx)("option",{value:"social",children:"Social"}),(0,a.jsx)("option",{value:"cognitive",children:"Cognitive"})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),(0,a.jsxs)("select",{value:o.status,onChange:e=>m("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,a.jsx)("option",{value:"",children:"All Status"}),(0,a.jsx)("option",{value:"completed",children:"Completed"}),(0,a.jsx)("option",{value:"draft",children:"Draft"}),(0,a.jsx)("option",{value:"submitted",children:"Submitted"})]})]})]}),0===e.length?(0,a.jsx)("div",{className:"text-center py-8 text-gray-500",children:"No answers found with the current filters."}):(0,a.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-1",children:e.question_text||"Question ID: ".concat(e.question_id)}),(0,a.jsx)("p",{className:"text-gray-700 bg-gray-100 px-3 py-2 rounded",children:e.answer_text?e.answer_text:"boolean"==typeof e.answer_value?e.answer_value?"Yes":"No":String(e.answer_value)})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500 ml-4",children:[(0,a.jsxs)("div",{children:["Submission: ",e.submission_id]}),(0,a.jsx)("div",{children:h(e.created_at)})]})]})},"".concat(e.submission_id,"-").concat(e.question_id)))}),e.length>0&&(0,a.jsxs)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:[(0,a.jsx)("h4",{className:"font-medium text-gray-900 mb-3",children:"Summary"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,a.jsxs)("div",{className:"bg-blue-50 p-3 rounded",children:[(0,a.jsx)("div",{className:"text-blue-600 font-medium",children:"Total Answers"}),(0,a.jsx)("div",{className:"text-blue-900 text-lg",children:e.length})]}),(0,a.jsxs)("div",{className:"bg-green-50 p-3 rounded",children:[(0,a.jsx)("div",{className:"text-green-600 font-medium",children:"Submissions"}),(0,a.jsx)("div",{className:"text-green-900 text-lg",children:t.length})]}),(0,a.jsxs)("div",{className:"bg-purple-50 p-3 rounded",children:[(0,a.jsx)("div",{className:"text-purple-600 font-medium",children:"Latest Answer"}),(0,a.jsx)("div",{className:"text-purple-900",children:e.length>0?h(Math.max(...e.map(e=>new Date(e.created_at).getTime())).toString()):"N/A"})]})]})]})]})]})}function M(){let[e,s]=(0,r.useState)([]),[t,l]=(0,r.useState)(!0),[n,i]=(0,r.useState)(null),[c,d]=(0,r.useState)(!1),o=async()=>{try{l(!0),i(null);let e=await b.rP.getProjects(),t=e.data;console.log("Projects API Response:",e),console.log("Projects Data:",t),console.log("Data type:",typeof t),console.log("Is array?",Array.isArray(t));let a=t;t&&t.results&&(a=t.results,console.log("Using paginated results:",a)),t&&t.data&&(a=t.data,console.log("Using nested data:",a)),Array.isArray(a)||(console.warn("Expected array but got:",typeof a),a=[]);let r=[];try{let e=await b.rP.getSubmissions(),s=e.data;console.log("Submissions API Response:",e),console.log("Submissions Data:",s),s&&s.results&&(s=s.results),s&&s.data&&(s=s.data),Array.isArray(s)&&(r=s),console.log("Final submissions data:",r)}catch(e){console.warn("Could not fetch submissions:",e)}let n=a.reduce((e,s)=>{let t=s.id||s.pk,a=r.filter(e=>{let s=e.project_id||e.project||e.survey_project||e.related_project;return s&&(s===t||s.toString()===t.toString())});console.log("Project ".concat(t," submissions:"),a);let l=new Set;return a.forEach(e=>{let s=e.participant_id||e.user_id||e.email||e.participant_email||e.respondent||e.created_by||e.id;s&&l.add(s)}),e[t]={participants_count:l.size,surveys_count:a.length,submissions:a},e},{});console.log("Project statistics from submissions:",n);let c=a.map(e=>{let s=e.id||e.pk||"unknown",t=n[s]||{participants_count:0,surveys_count:0};return{id:s,name:e.name||e.title||e.project_name||"Unnamed Project",description:e.description||e.desc||"",status:e.status||"active",created_at:e.created_at||new Date().toISOString(),updated_at:e.updated_at||new Date().toISOString(),created_by:e.created_by||e.owner||e.creator,institution:e.institution||e.organization,start_date:e.start_date,end_date:e.end_date,participants_count:t.participants_count||e.participants_count||e.participants||0,surveys_count:t.surveys_count||e.surveys_count||e.surveys||0}});console.log("Final formatted projects:",c),s(c)}catch(s){var e,t;console.error("Error fetching projects:",s),i((null==(t=s.response)||null==(e=t.data)?void 0:e.message)||"Failed to fetch projects")}finally{l(!1)}};(0,r.useEffect)(()=>{o()},[]);let x=e=>{try{return new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}catch(e){return"Invalid Date"}},u=()=>{d(!0),console.log("Create new project clicked")};return t?(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Projects"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Loading projects..."})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsx)("div",{className:"flex items-center justify-center py-8",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})})]}):n?(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Projects"}),(0,a.jsx)("p",{className:"text-sm text-red-600",children:"Error loading projects"})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsxs)("div",{className:"text-red-600 py-4",children:[n,(0,a.jsx)("button",{onClick:o,className:"ml-4 px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Retry"})]})})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[(0,a.jsx)(w.Zp,{children:(0,a.jsx)(w.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-blue-600 text-xl",children:"\uD83D\uDCC1"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Projects"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]})]})})}),(0,a.jsx)(w.Zp,{children:(0,a.jsx)(w.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-green-600 text-xl",children:"✅"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Active Projects"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>{var s;return(null==(s=e.status)?void 0:s.toLowerCase())==="active"}).length})]})]})})}),(0,a.jsx)(w.Zp,{children:(0,a.jsx)(w.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-purple-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-purple-600 text-xl",children:"\uD83D\uDC65"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Participants"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce((e,s)=>e+(s.participants_count||0),0)})]})]})})}),(0,a.jsx)(w.Zp,{children:(0,a.jsx)(w.Wu,{className:"p-6",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-orange-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-orange-600 text-xl",children:"\uD83D\uDCCB"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Surveys"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce((e,s)=>e+(s.surveys_count||0),0)})]})]})})})]}),(0,a.jsxs)(w.Zp,{children:[(0,a.jsx)(w.aR,{children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Research Projects"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Manage and monitor your research projects"})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:o,className:"px-4 py-2 bg-gray-100 text-gray-700 text-sm rounded hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Refresh"}),(0,a.jsx)("button",{onClick:u,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"+ Create New Project"})]})]})}),(0,a.jsx)(w.Wu,{children:0===e.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)("div",{className:"text-gray-400 text-6xl mb-4",children:"\uD83D\uDCC1"}),(0,a.jsx)("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No projects found"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Get started by creating your first research project."}),(0,a.jsx)("button",{onClick:u,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500",children:"Create Your First Project"})]}):(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,a.jsx)("thead",{className:"bg-gray-50",children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Project Name"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Institution"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Participants"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Surveys"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Updated"}),(0,a.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>(0,a.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.description&&(0,a.jsx)("div",{className:"text-sm text-gray-500 truncate max-w-xs",children:e.description})]})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,a.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat((e=>{switch(null==e?void 0:e.toLowerCase()){case"active":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"paused":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}})(e.status||"active")),children:e.status||"Active"})}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.institution||"-"}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.participants_count||0}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.surveys_count||0}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.created_at)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:x(e.updated_at)}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,a.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,a.jsx)("button",{className:"text-blue-600 hover:text-blue-900",onClick:()=>console.log("View project:",e.id),children:"View"}),(0,a.jsx)("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>console.log("Edit project:",e.id),children:"Edit"}),(0,a.jsx)("button",{className:"text-red-600 hover:text-red-900",onClick:()=>console.log("Delete project:",e.id),children:"Delete"})]})})]},e.id))})]})})})]})]})}function E(){return(0,a.jsxs)(w.Zp,{children:[(0,a.jsxs)(w.aR,{children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Users"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Admin users and permissions (coming soon)"})]}),(0,a.jsx)(w.Wu,{children:(0,a.jsx)("div",{className:"text-gray-600",children:"Users/roles UI goes here."})})]})}let q=["submissions","surveys","questions","answers","projects","users"];function I(){let e=(0,l.useRouter)(),s=(0,l.useSearchParams)(),t=(null==s?void 0:s.get("tab"))||"submissions",[n,i]=(0,r.useState)(t);(0,r.useEffect)(()=>{if(t!==n){let t=new URLSearchParams((null==s?void 0:s.toString())||"");t.set("tab",n),e.replace("/admin?".concat(t.toString()))}},[n]),(0,r.useEffect)(()=>{t!==n&&i(t)},[t]),(0,r.useEffect)(()=>{localStorage.getItem("access_token")||e.push("/admin/login")},[e]);let c=(0,r.useMemo)(()=>{switch(n){case"submissions":default:return(0,a.jsx)(_,{});case"surveys":return(0,a.jsx)(A,{});case"questions":return(0,a.jsx)(D,{});case"answers":return(0,a.jsx)(L,{});case"projects":return(0,a.jsx)(M,{});case"users":return(0,a.jsx)(E,{})}},[n]);return(0,a.jsx)(p,{tabs:q,activeTab:n,onTabChange:i,children:c})}function Z(){return(0,a.jsx)(r.Suspense,{fallback:(0,a.jsx)("div",{children:"Loading dashboard..."}),children:(0,a.jsx)(I,{})})}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=32092)),_N_E=e.O()}]);