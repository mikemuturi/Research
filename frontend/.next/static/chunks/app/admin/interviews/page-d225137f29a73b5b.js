(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[695],{3061:(e,t,s)=>{Promise.resolve().then(s.bind(s,97775))},5590:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=e=>{let{label:t,error:s,className:a="",...n}=e;return(0,r.jsxs)("div",{className:"space-y-1",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,r.jsx)("input",{className:"\n          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm \n          placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\n          ".concat(s?"border-red-500":"","\n          ").concat(a,"\n        "),...n}),s&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:s})]})}},6191:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45105).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},24326:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45105).A)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},31166:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=e=>{let{variant:t="primary",size:s="md",className:a="",children:n,...i}=e;return(0,r.jsx)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s]," ").concat(a),...i,children:n})}},43698:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=e=>{let{label:t,error:s,options:a,className:n="",...i}=e;return(0,r.jsxs)("div",{className:"space-y-1",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,r.jsx)("select",{className:"\n          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm \n          focus:outline-none focus:ring-blue-500 focus:border-blue-500\n          ".concat(s?"border-red-500":"","\n          ").concat(n,"\n        "),...i,children:a.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),s&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:s})]})}},45105:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(12115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{color:i="currentColor",size:l=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:d="",children:u,...m}=s;return(0,r.createElement)("svg",{ref:n,...a,width:l,height:l,stroke:i,strokeWidth:c?24*Number(o)/Number(l):o,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),d].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(u)?u:[u]])});return s.displayName="".concat(e),s}},47972:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>i,Zp:()=>a,aR:()=>n});var r=s(95155);s(12115);let a=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm ".concat(s),children:t})},n=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(s),children:t})},i=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 ".concat(s),children:t})}},65229:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45105).A)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},71360:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(45105).A)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},90960:(e,t,s)=>{"use strict";s.d(t,{IR:()=>o,R2:()=>i,rP:()=>l});var r=s(95125);let a=s(95704).env.NEXT_PUBLIC_API_BASE_URL||"https://rafsia.org/api",n=r.A.create({baseURL:a,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("access_token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e}),n.interceptors.response.use(e=>e,async e=>{var t;let s=null==e||null==(t=e.response)?void 0:t.status,i=e.config;if(401===s&&!(null==i?void 0:i._retry)){let e=localStorage.getItem("refresh_token");if(e)try{i._retry=!0;let{data:t}=await r.A.post("".concat(a,"/auth/token/refresh/"),{refresh:e}),{access:s}=t||{};if(s)return localStorage.setItem("access_token",s),i.headers=i.headers||{},i.headers.Authorization="Bearer ".concat(s),n.request(i)}catch(e){}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/admin/login"}return Promise.reject(e)});let i={login:(e,t)=>n.post("/auth/token/",{username:e,password:t}),register:(e,t,s)=>n.post("/auth/register/",{username:e,email:t,password:s}),refresh:e=>n.post("/auth/token/refresh/",{refresh:e})},l={getQuestions:(e,t)=>n.get("/surveys/questions/",{params:{role:e,dimension:t}}),submitSurvey:e=>n.post("/surveys/submissions/",e),getSubmission:(e,t)=>n.get("/surveys/submissions/".concat(e,"/"),{params:t?{public:"true"}:{}}),getSubmissions:(e,t,s)=>n.get("/surveys/submissions/",{params:e}),getStatistics:()=>n.get("/surveys/submissions/statistics/"),exportCSV:e=>n.get("/surveys/submissions/export_csv/",{params:e}),exportPDF:e=>n.get("/surveys/submissions/".concat(e,"/export_pdf/")),getInstitutions:()=>n.get("/surveys/institutions/"),getProjects:()=>n.get("/surveys/projects/")},o={getNotes:e=>n.get("/interviews/notes/",{params:e}),createNote:e=>n.post("/interviews/notes/",e),updateNote:(e,t)=>n.put("/interviews/notes/".concat(e,"/"),t),deleteNote:e=>n.delete("/interviews/notes/".concat(e,"/")),getAnalytics:()=>n.get("/interviews/notes/analytics/")}},94465:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(95155);s(12115);var a=s(65229);let n=e=>{let{isOpen:t,onClose:s,title:n,children:i,size:l="md"}=e;return t?(0,r.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,r.jsxs)("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[(0,r.jsx)("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:s}),(0,r.jsxs)("div",{className:"inline-block w-full ".concat({sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl"}[l]," my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-lg"),children:[(0,r.jsxs)("div",{className:"flex items-center justify-between px-6 py-4 border-b border-gray-200",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:n}),(0,r.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,r.jsx)(a.A,{size:24})})]}),(0,r.jsx)("div",{className:"px-6 py-4",children:i})]})]})}):null}},97775:(e,t,s)=>{"use strict";s.d(t,{default:()=>x});var r=s(95155),a=s(12115),n=s(6191),i=s(24326),l=s(71360),o=s(90960),c=s(31166),d=s(5590),u=s(43698),m=s(94465),p=s(47972);let x=()=>{let[e,t]=(0,a.useState)([]),[s,x]=(0,a.useState)(!0),[g,h]=(0,a.useState)(!1),[v,y]=(0,a.useState)(null),[b,j]=(0,a.useState)(""),[f,N]=(0,a.useState)({respondent_type:"",dimension:"",date_from:"",date_to:""}),[w,_]=(0,a.useState)({title:"",respondent_type:"",institution_name:"",respondent_name:"",respondent_role:"",dimension:"",question:"",response:"",key_insights:"",interview_date:""});(0,a.useEffect)(()=>{k()},[f,b]);let k=async()=>{try{x(!0);let e={...f,search:b||void 0},s=await o.IR.getNotes(e);t(s.data)}catch(e){console.error("Error loading interviews:",e)}finally{x(!1)}},A=async e=>{e.preventDefault();try{v?await o.IR.updateNote(v.id.toString(),w):await o.IR.createNote(w),h(!1),y(null),S(),k()}catch(e){console.error("Error saving interview:",e),alert("Error saving interview. Please try again.")}},C=async e=>{if(confirm("Are you sure you want to delete this interview note?"))try{await o.IR.deleteNote(e.toString()),k()}catch(e){console.error("Error deleting interview:",e),alert("Error deleting interview. Please try again.")}},S=()=>{_({title:"",respondent_type:"",institution_name:"",respondent_name:"",respondent_role:"",dimension:"",question:"",response:"",key_insights:"",interview_date:""})};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Interview Management"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Capture and manage qualitative interview data"})]}),(0,r.jsxs)(c.A,{onClick:()=>{y(null),S(),h(!0)},className:"flex items-center space-x-2",children:[(0,r.jsx)(n.A,{size:16}),(0,r.jsx)("span",{children:"New Interview"})]})]}),(0,r.jsx)(p.Zp,{children:(0,r.jsx)(p.Wu,{className:"p-4",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[(0,r.jsx)(d.A,{placeholder:"Search interviews...",value:b,onChange:e=>j(e.target.value),className:"flex-1"}),(0,r.jsx)(u.A,{value:f.respondent_type,onChange:e=>N(t=>({...t,respondent_type:e.target.value})),options:[{value:"",label:"All types"},{value:"ihl",label:"Institution of Higher Learning"},{value:"isp",label:"Internet Service Provider"}]}),(0,r.jsx)(u.A,{value:f.dimension,onChange:e=>N(t=>({...t,dimension:e.target.value})),options:[{value:"",label:"All dimensions"},{value:"technical",label:"Technical"},{value:"economic",label:"Economic"},{value:"socio_cultural",label:"Socio-Cultural"},{value:"environmental",label:"Environmental"},{value:"policy_regulatory",label:"Policy & Regulatory"},{value:"general",label:"General"}]}),(0,r.jsx)(d.A,{type:"date",value:f.date_from,onChange:e=>N(t=>({...t,date_from:e.target.value})),placeholder:"From date"}),(0,r.jsx)(d.A,{type:"date",value:f.date_to,onChange:e=>N(t=>({...t,date_to:e.target.value})),placeholder:"To date"})]})})}),(0,r.jsx)(p.Zp,{children:(0,r.jsx)(p.Wu,{children:s?(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading interviews..."})]}):0===e.length?(0,r.jsx)("div",{className:"text-center py-8",children:(0,r.jsx)("p",{className:"text-gray-500",children:"No interviews found matching your criteria."})}):(0,r.jsx)("div",{className:"space-y-4",children:e.map(e=>(0,r.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[(0,r.jsxs)(c.A,{variant:"outline",size:"sm",onClick:()=>(e=>{y(e),_({title:e.title,respondent_type:e.respondent_type,institution_name:e.institution_name,respondent_name:e.respondent_name,respondent_role:e.respondent_role,dimension:e.dimension,question:e.question,response:e.response,key_insights:e.key_insights,interview_date:e.interview_date}),h(!0)})(e),className:"flex items-center space-x-1",children:[(0,r.jsx)(i.A,{size:14}),(0,r.jsx)("span",{children:"Edit"})]}),(0,r.jsxs)(c.A,{variant:"danger",size:"sm",onClick:()=>C(e.id),className:"flex items-center space-x-1",children:[(0,r.jsx)(l.A,{size:14}),(0,r.jsx)("span",{children:"Delete"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mb-3",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Type:"})," ",(0,r.jsx)("span",{className:"font-medium",children:"ihl"===e.respondent_type?"Institution":"Service Provider"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Dimension:"})," ",(0,r.jsx)("span",{className:"font-medium capitalize",children:e.dimension.replace("_"," ")})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("span",{className:"text-gray-500",children:"Date:"})," ",(0,r.jsx)("span",{className:"font-medium",children:new Date(e.interview_date).toLocaleDateString()})]})]}),e.institution_name&&(0,r.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Institution:"})," ",e.institution_name]}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Question:"})," ",e.question]}),(0,r.jsxs)("p",{className:"text-sm text-gray-700 mb-2",children:[(0,r.jsx)("span",{className:"font-medium",children:"Response:"})," ",e.response]}),e.key_insights&&(0,r.jsxs)("p",{className:"text-sm text-gray-700",children:[(0,r.jsx)("span",{className:"font-medium",children:"Key Insights:"})," ",e.key_insights]})]},e.id))})})}),(0,r.jsx)(m.A,{isOpen:g,onClose:()=>h(!1),title:v?"Edit Interview":"New Interview",size:"lg",children:(0,r.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,r.jsx)(d.A,{label:"Title *",value:w.title,onChange:e=>_(t=>({...t,title:e.target.value})),required:!0}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(u.A,{label:"Respondent Type *",value:w.respondent_type,onChange:e=>_(t=>({...t,respondent_type:e.target.value})),options:[{value:"",label:"Select type..."},{value:"ihl",label:"Institution of Higher Learning"},{value:"isp",label:"Internet Service Provider"}],required:!0}),(0,r.jsx)(u.A,{label:"Dimension *",value:w.dimension,onChange:e=>_(t=>({...t,dimension:e.target.value})),options:[{value:"",label:"Select dimension..."},{value:"technical",label:"Technical Readiness"},{value:"economic",label:"Economic Readiness"},{value:"socio_cultural",label:"Socio-Cultural Readiness"},{value:"environmental",label:"Environmental Readiness"},{value:"policy_regulatory",label:"Policy & Regulatory Readiness"},{value:"general",label:"General"}],required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(d.A,{label:"Institution Name",value:w.institution_name,onChange:e=>_(t=>({...t,institution_name:e.target.value}))}),(0,r.jsx)(d.A,{label:"Interview Date *",type:"date",value:w.interview_date,onChange:e=>_(t=>({...t,interview_date:e.target.value})),required:!0})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(d.A,{label:"Respondent Name",value:w.respondent_name,onChange:e=>_(t=>({...t,respondent_name:e.target.value}))}),(0,r.jsx)(d.A,{label:"Respondent Role",value:w.respondent_role,onChange:e=>_(t=>({...t,respondent_role:e.target.value}))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Question *"}),(0,r.jsx)("textarea",{value:w.question,onChange:e=>_(t=>({...t,question:e.target.value})),rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Response *"}),(0,r.jsx)("textarea",{value:w.response,onChange:e=>_(t=>({...t,response:e.target.value})),rows:4,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key Insights"}),(0,r.jsx)("textarea",{value:w.key_insights,onChange:e=>_(t=>({...t,key_insights:e.target.value})),rows:3,className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500",placeholder:"Key themes, insights, or observations from this response..."})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-4 pt-4",children:[(0,r.jsx)(c.A,{type:"button",variant:"outline",onClick:()=>h(!1),children:"Cancel"}),(0,r.jsx)(c.A,{type:"submit",children:v?"Update Interview":"Save Interview"})]})]})})]})}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=3061)),_N_E=e.O()}]);