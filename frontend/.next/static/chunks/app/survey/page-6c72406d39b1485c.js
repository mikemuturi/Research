(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[869],{5590:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=e=>{let{label:t,error:s,className:a="",...n}=e;return(0,r.jsxs)("div",{className:"space-y-1",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,r.jsx)("input",{className:"\n          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm \n          placeholder-gray-400 focus:outline-none focus:ring-blue-500 focus:border-blue-500\n          ".concat(s?"border-red-500":"","\n          ").concat(a,"\n        "),...n}),s&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:s})]})}},15274:(e,t,s)=>{Promise.resolve().then(s.bind(s,16645))},16645:(e,t,s)=>{"use strict";s.d(t,{default:()=>y});var r=s(95155),a=s(12115),n=s(20063),l=s(45105);let i=(0,l.A)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),o=(0,l.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]),c=(0,l.A)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);var u=s(90960),d=s(31166),m=s(5590),h=s(43698),x=s(47972);let g=[{key:"technical",label:"Technical Readiness"},{key:"economic",label:"Economic Readiness"},{key:"socio_cultural",label:"Socio-Cultural Readiness"},{key:"environmental",label:"Environmental Readiness"},{key:"policy_regulatory",label:"Policy & Regulatory Readiness"}],p=[{value:"",label:"Select your role..."},{value:"lecturer",label:"Lecturer"},{value:"it_support",label:"IT Support"},{value:"admin",label:"Administrator"},{value:"principal",label:"Principal"},{value:"student",label:"Student"},{value:"service_provider",label:"Service Provider"}],y=()=>{let e=(0,n.useRouter)(),[t,s]=(0,a.useState)(0),[l,y]=(0,a.useState)([]),[b,v]=(0,a.useState)([]),[j,f]=(0,a.useState)([]),[N,w]=(0,a.useState)(!1),[k,S]=(0,a.useState)({name:"",email:"",phone:"",role:"",institution:"",institution_name:"",county:"",project:"",consent_given:!1,is_anonymous:!1,answers:{}}),[_,A]=(0,a.useState)({});(0,a.useEffect)(()=>{C()},[]),(0,a.useEffect)(()=>{k.role&&P()},[k.role]);let C=async()=>{try{let[e,t]=await Promise.all([u.rP.getInstitutions(),u.rP.getProjects()]);v(e.data),f(t.data)}catch(e){console.error("Error loading initial data:",e)}},P=async()=>{try{w(!0);let e=["lecturer","it_support","admin","principal","student"].includes(k.role)?"ihl":"isp",t=await u.rP.getQuestions(e);y(t.data);let s={};t.data.forEach(e=>{s[e.id]=3}),S(e=>({...e,answers:s})),console.log("Loaded ".concat(t.data.length," questions for role: ").concat(e))}catch(e){console.error("Error loading questions:",e),alert("Error loading questions. Please refresh the page and try again.")}finally{w(!1)}},R=(e,t)=>{S(s=>({...s,[e]:t})),_[e]&&A(t=>({...t,[e]:""}))},I=e=>{let t={};return 0===e&&(k.role||(t.role="Role is required"),k.county||(t.county="County is required"),k.consent_given||(t.consent_given="Consent is required to proceed"),"service_provider"===k.role||k.is_anonymous||k.name||(t.name="Name is required")),A(t),0===Object.keys(t).length},E=async()=>{if(I(t)){w(!0);try{let t={...k,institution:k.institution?Number(k.institution):null,project:k.project?Number(k.project):null,answers:Object.entries(k.answers).map(e=>{let[t,s]=e;return{question:Number(t),value:Number(s)}})},s=await u.rP.submitSurvey(t);e.push("/results/".concat(s.data.id))}catch(e){console.error("Error submitting survey:",e),alert("Error submitting survey. Please try again.")}finally{w(!1)}}},q=()=>t/g.length*100;return(0,r.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"RAFSIA Readiness Assessment"}),(0,r.jsx)("p",{className:"text-gray-600 mt-2",children:"Satellite Internet Adoption Readiness Survey"})]}),(0,r.jsxs)("div",{className:"mb-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:["Step ",t+1," of ",g.length+1]}),(0,r.jsxs)("span",{className:"text-sm text-gray-600",children:[Math.round(q()),"% Complete"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,r.jsx)("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:"".concat(q(),"%")}})})]}),(()=>{if(0===t)return(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Respondent Information"}),(0,r.jsx)("p",{className:"text-sm text-gray-600",children:"Please provide your basic information to begin the assessment."})]}),(0,r.jsxs)(x.Wu,{className:"space-y-6",children:[(0,r.jsx)(h.A,{label:"Role *",value:k.role,onChange:e=>R("role",e.target.value),options:p,error:_.role}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"anonymous",checked:k.is_anonymous,onChange:e=>R("is_anonymous",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,r.jsx)("label",{htmlFor:"anonymous",className:"text-sm text-gray-700",children:"Submit anonymously (hide personal information)"})]}),!k.is_anonymous&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.A,{label:"Full Name *",type:"text",value:k.name,onChange:e=>R("name",e.target.value),error:_.name}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsx)(m.A,{label:"Email Address",type:"email",value:k.email,onChange:e=>R("email",e.target.value)}),(0,r.jsx)(m.A,{label:"Phone Number",type:"tel",value:k.phone,onChange:e=>R("phone",e.target.value)})]})]}),"service_provider"!==k.role&&(0,r.jsxs)(r.Fragment,{children:[b.length>0&&(0,r.jsx)(h.A,{label:"Institution (if listed)",value:k.institution,onChange:e=>R("institution",e.target.value),options:[{value:"",label:"Select institution..."},...b.map(e=>({value:e.id.toString(),label:e.name}))]}),(0,r.jsx)(m.A,{label:"Institution Name (if not listed above)",type:"text",value:k.institution_name,onChange:e=>R("institution_name",e.target.value)})]}),(0,r.jsx)(m.A,{label:"County *",type:"text",value:k.county,onChange:e=>R("county",e.target.value),error:_.county}),j.length>0&&(0,r.jsx)(h.A,{label:"Project/Study",value:k.project,onChange:e=>R("project",e.target.value),options:[{value:"",label:"Select project..."},...j.map(e=>({value:e.id.toString(),label:e.name}))]}),(0,r.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("input",{type:"checkbox",id:"consent",checked:k.consent_given,onChange:e=>R("consent_given",e.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded mt-1"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"consent",className:"text-sm text-gray-700",children:(0,r.jsx)("strong",{children:"Informed Consent *"})}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-1",children:"I understand that my responses will be used for research purposes to assess readiness for satellite internet adoption. My data will be handled securely and in compliance with applicable data protection regulations. I can withdraw my consent at any time by contacting the research team."})]})]}),_.consent_given&&(0,r.jsx)("p",{className:"text-sm text-red-600 mt-2",children:_.consent_given})]})]})]});let e=g[t-1],s=(()=>{if(0===t)return[];let e=g[t-1];return l.filter(t=>t.dimension===e.key)})();return N?(0,r.jsx)(x.Zp,{children:(0,r.jsx)(x.Wu,{className:"flex items-center justify-center py-12",children:(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),(0,r.jsx)("p",{className:"mt-2 text-gray-600",children:"Loading questions..."})]})})}):0===s.length?(0,r.jsxs)(x.Zp,{children:[(0,r.jsx)(x.aR,{children:(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:e.label})}),(0,r.jsxs)(x.Wu,{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-gray-600 mb-4",children:"No questions available for this dimension."}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"Please ensure you have selected a role and that questions are loaded in the database."})]})]}):(0,r.jsxs)(x.Zp,{children:[(0,r.jsxs)(x.aR,{children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:e.label}),(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:["Please rate your agreement with the following statements on a scale of 1 to 5. (",s.length," questions)"]})]}),(0,r.jsx)(x.Wu,{className:"space-y-8",children:s.map(e=>(0,r.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,r.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-4",children:e.text}),((e,t)=>(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("div",{className:"flex justify-between items-center",children:["Strongly Disagree","Disagree","Neutral","Agree","Strongly Agree"].map((e,t)=>(0,r.jsx)("span",{className:"text-xs text-gray-500 text-center flex-1",children:e},t))}),(0,r.jsx)("div",{className:"flex justify-between items-center",children:[1,2,3,4,5].map(s=>(0,r.jsxs)("label",{className:"flex flex-col items-center space-y-1 cursor-pointer flex-1",children:[(0,r.jsx)("input",{type:"radio",name:"question-".concat(e),value:s,checked:t===s,onChange:()=>{S(t=>({...t,answers:{...t.answers,[e]:s}}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm font-medium",children:s})]},s))})]}))(e.id,k.answers[e.id]||3)]},e.id))})]})})(),(0,r.jsxs)("div",{className:"flex justify-between mt-8",children:[(0,r.jsxs)(d.A,{variant:"outline",onClick:()=>{s(e=>Math.max(e-1,0))},disabled:0===t,className:"flex items-center space-x-2",children:[(0,r.jsx)(i,{size:16}),(0,r.jsx)("span",{children:"Previous"})]}),t===g.length?(0,r.jsx)(d.A,{onClick:E,disabled:N,className:"flex items-center space-x-2",children:N?(0,r.jsx)("span",{children:"Submitting..."}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o,{size:16}),(0,r.jsx)("span",{children:"Submit Survey"})]})}):(0,r.jsxs)(d.A,{onClick:()=>{I(t)&&s(e=>Math.min(e+1,g.length))},className:"flex items-center space-x-2",children:[(0,r.jsx)("span",{children:"Next"}),(0,r.jsx)(c,{size:16})]})]})]})})}},20063:(e,t,s)=>{"use strict";var r=s(47260);s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}}),s.o(r,"useSearchParams")&&s.d(t,{useSearchParams:function(){return r.useSearchParams}})},31166:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=e=>{let{variant:t="primary",size:s="md",className:a="",children:n,...l}=e;return(0,r.jsx)("button",{className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-900 hover:bg-gray-300 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",outline:"border border-gray-300 bg-white text-gray-700 hover:bg-gray-50 focus:ring-blue-500"}[t]," ").concat({sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[s]," ").concat(a),...l,children:n})}},43698:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(95155);s(12115);let a=e=>{let{label:t,error:s,options:a,className:n="",...l}=e;return(0,r.jsxs)("div",{className:"space-y-1",children:[t&&(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t}),(0,r.jsx)("select",{className:"\n          block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm \n          focus:outline-none focus:ring-blue-500 focus:border-blue-500\n          ".concat(s?"border-red-500":"","\n          ").concat(n,"\n        "),...l,children:a.map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))}),s&&(0,r.jsx)("p",{className:"text-sm text-red-600",children:s})]})}},45105:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(12115),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let n=(e,t)=>{let s=(0,r.forwardRef)((s,n)=>{let{color:l="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:c,className:u="",children:d,...m}=s;return(0,r.createElement)("svg",{ref:n,...a,width:i,height:i,stroke:l,strokeWidth:c?24*Number(o)/Number(i):o,className:["lucide","lucide-".concat(e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim()),u].join(" "),...m},[...t.map(e=>{let[t,s]=e;return(0,r.createElement)(t,s)}),...Array.isArray(d)?d:[d]])});return s.displayName="".concat(e),s}},47972:(e,t,s)=>{"use strict";s.d(t,{Wu:()=>l,Zp:()=>a,aR:()=>n});var r=s(95155);s(12115);let a=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm ".concat(s),children:t})},n=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 ".concat(s),children:t})},l=e=>{let{children:t,className:s=""}=e;return(0,r.jsx)("div",{className:"px-6 py-4 ".concat(s),children:t})}},90960:(e,t,s)=>{"use strict";s.d(t,{IR:()=>o,R2:()=>l,rP:()=>i});var r=s(95125);let a=s(95704).env.NEXT_PUBLIC_API_BASE_URL||"https://rafsia.org/api",n=r.A.create({baseURL:a,headers:{"Content-Type":"application/json"}});n.interceptors.request.use(e=>{{let t=localStorage.getItem("access_token");t&&(e.headers=e.headers||{},e.headers.Authorization="Bearer ".concat(t))}return e}),n.interceptors.response.use(e=>e,async e=>{var t;let s=null==e||null==(t=e.response)?void 0:t.status,l=e.config;if(401===s&&!(null==l?void 0:l._retry)){let e=localStorage.getItem("refresh_token");if(e)try{l._retry=!0;let{data:t}=await r.A.post("".concat(a,"/auth/token/refresh/"),{refresh:e}),{access:s}=t||{};if(s)return localStorage.setItem("access_token",s),l.headers=l.headers||{},l.headers.Authorization="Bearer ".concat(s),n.request(l)}catch(e){}localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),window.location.href="/admin/login"}return Promise.reject(e)});let l={login:(e,t)=>n.post("/auth/token/",{username:e,password:t}),register:(e,t,s)=>n.post("/auth/register/",{username:e,email:t,password:s}),refresh:e=>n.post("/auth/token/refresh/",{refresh:e})},i={getQuestions:(e,t)=>n.get("/surveys/questions/",{params:{role:e,dimension:t}}),submitSurvey:e=>n.post("/surveys/submissions/",e),getSubmission:(e,t)=>n.get("/surveys/submissions/".concat(e,"/"),{params:t?{public:"true"}:{}}),getSubmissions:(e,t,s)=>n.get("/surveys/submissions/",{params:e}),getStatistics:()=>n.get("/surveys/submissions/statistics/"),exportCSV:e=>n.get("/surveys/submissions/export_csv/",{params:e}),exportPDF:e=>n.get("/surveys/submissions/".concat(e,"/export_pdf/")),getInstitutions:()=>n.get("/surveys/institutions/"),getProjects:()=>n.get("/surveys/projects/")},o={getNotes:e=>n.get("/interviews/notes/",{params:e}),createNote:e=>n.post("/interviews/notes/",e),updateNote:(e,t)=>n.put("/interviews/notes/".concat(e,"/"),t),deleteNote:e=>n.delete("/interviews/notes/".concat(e,"/")),getAnalytics:()=>n.get("/interviews/notes/analytics/")}}},e=>{e.O(0,[125,441,255,358],()=>e(e.s=15274)),_N_E=e.O()}]);